---
title: 维护与开发手册
createTime: 2025/03/13 15:47:08
permalink: /public-service/overleaf/maintenance-dev-books/
icon: fluent:window-dev-edit-20-regular
---

> 本文是面向Overleaf LaTeX协作平台的维护与开发手册，管理员和有志于自行运营Overleaf的开发者可以参考本文。

Overleaf toolkit用于下载和管理ShareLaTeX的容器镜像，不过是官方在下载时提供最小版本，需要进行一些中文支持和配置才能使用。

## 安装Docker CE

:::important docker拉取失败解决方案

配置daemon.json文件：参考 [magic](/csdiy/tools-must/magic/docker-speed/) 配置docker代理

:::

Docker 提供了一个自动配置与安装的脚本，支持 Debian、RHEL、SUSE 系列及衍生系统的安装。请注意，Docker 官方不建议在生产环境使用此脚本安装 Docker CE。

### CentOS/RHEL

> :[devicon:centos]:CentOS :[devicon:rockylinux]: RockyLinux :[devicon:almalinux]: AlmaLinux

如果你之前安装过 docker，请先删掉

```shell
sudo dnf remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-selinux \
                  docker-engine-selinux \
                  docker-engine
```

安装依赖，下载 repo 文件，并把软件仓库地址替换为CERNET联合镜像站：

```shell
sudo dnf -y install dnf-plugins-core
sudo dnf-3 config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo
sudo sed -i 's+https://download.docker.com+https://mirrors.cernet.edu.cn/docker-ce+' /etc/yum.repos.d/docker-ce.repo
```

### Debian/Ubuntu/Raspbian

> 以Ubuntu22 LTS Jammy为例，[Alist镜像站下载iso](http://192.168.183.171:5244/mirrors/system-iso/Ubuntu/ubuntu-22.04.5-desktop-amd64.iso)
> 
> 其他软件源配置参考：:[https://help.mirrors.cernet.edu.cn/favicon/android-icon-192x192.png]:[MirrorZ help Ubuntu](https://help.mirrors.cernet.edu.cn/ubuntu/)
:::details 配置Ubuntu软件源
```shell
echo '# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释
deb https://mirrors.cernet.edu.cn/ubuntu/ jammy main restricted universe multiverse
# deb-src https://mirrors.cernet.edu.cn/ubuntu/ jammy main restricted universe multiverse
deb https://mirrors.cernet.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
# deb-src https://mirrors.cernet.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
deb https://mirrors.cernet.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
# deb-src https://mirrors.cernet.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse

# 以下安全更新软件源包含了官方源与镜像站配置，如有需要可自行修改注释切换
# deb https://mirrors.cernet.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
# # deb-src https://mirrors.cernet.edu.cn/ubuntu/ jammy-security main restricted universe multiverse

deb http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse
# deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse

# 预发布软件源，不建议启用
# deb https://mirrors.cernet.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
# # deb-src https://mirrors.cernet.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
' | sudo tee /etc/apt/sources.list

:::

## 导入Overleaf Tookit

<RepoCard repo="overleaf/toolkit"></RepoCard>

### git克隆仓库

```shell
git clone https://github.com/overleaf/toolkit.git ./overleaf-toolkit
```


```shell
cd overleaf-toolkit
```

初始化项目

```shell
bin/init
```

初次启动容器，包含mongodb、redis、sharelatex
```shell
bin/up
```

启动完成后显示下图即为成功
![2025-04-23_18-28-33.png](../../../.vuepress/public/src/2025-04-23_18-28-33.png)

停止容器
```shell
bin/stop
```

## 配置Overleaf

`cd config`进入配置文件夹

### overleaf.rc


## 升级TexLive

为了节省带宽，Overleaf 镜像仅包含 TeX Live 的最小安装。您可以在 Overleaf 容器中使用 tlmgr 命令安装更多包或升级到完整的 TeX Live 安装。

### 进入 Overleaf 容器

要在 Overleaf 容器中启动 shell，请运行

```shell
bin/shell
```
您将看到一个类似以下提示：
```shell
root@309b192d4030:/#
```

### 确定当前 TeX Live 版本

TeX Live 每年大约在 4 月份发布。使用 tlmgr 的步骤取决于您是否使用当前版本或较旧版本。您可以使用 `tlmgr --version` 检查正在运行的 TeX Live 版本。例如，此安装运行 TeX Live 2025：
![2025-04-23_19-30-22.png](../../../.vuepress/public/src/2025-04-23_19-30-22.png)

### 安装完整的TeX Live

:::tip CTAN,The Comprehensive TeX Archive Network
综合 TEX 档案网络（CTAN）是围绕 TEX 的各种材料的中心场所。大多数包都是免费的，可以立即下载和使用。

---

关于CTAN
[https://ctan.org/](https://ctan.org)

在全球网络CTAN内，可以配置CTAN镜像以加速下载。


CTAN镜像站点[https://ctan.org/mirrors](https://ctan.org/mirrors)


:::